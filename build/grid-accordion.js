(()=>{"use strict";const t={width:800,height:400,responsive:!0,responsiveMode:"auto",aspectRatio:-1,orientation:"horizontal",startPanel:-1,rows:3,columns:4,openedPanelWidth:"max",openedPanelHeight:"max",maxOpenedPanelWidth:"70%",maxOpenedPanelHeight:"70%",openPanelOn:"hover",closePanelsOnMouseOut:!0,mouseDelay:200,panelDistance:10,openPanelDuration:700,closePanelDuration:700,pageScrollDuration:500,pageScrollEasing:"swing",breakpoints:null,startPage:0,shadow:!1,shuffle:!1,addOns:[]};function e(t){let e="complete";return"IMG"===t.tagName&&!1===t.complete?e="loading":Array.from(t.getElementsByTagName("img")).forEach((t=>{!1===t.complete&&(e="loading")})),e}function i(t){return isNaN(t)||"auto"===t?t:t+"px"}class s extends EventTarget{handlerReferences={};uid=null;static idCounter=0;constructor(){super()}addEventListener(t,e){const i=e;let n=t;null===this.uid&&(this.uid=s.idCounter++),-1!==t.indexOf(".")&&(n=t.split(".")[0]),this.handlerReferences[t+"."+this.uid]=i,super.addEventListener(n,i)}removeEventListener(t){let e=t;const i=this.handlerReferences[t+"."+this.uid];-1!==t.indexOf(".")&&(e=t.split(".")[0]),super.removeEventListener(e,i),delete this.handlerReferences[t+"."+this.uid]}dispatchEvent(t,e=null,i=null){const s=new CustomEvent(t,{...i||{},detail:e||{}});super.dispatchEvent(s)}on(t,e){this.addEventListener(t,e)}off(t){this.removeEventListener(t)}trigger(t){const{type:e,detail:i}=t;this.dispatchEvent(e,i)}}const n=s,a=class extends n{#t;panelEl;settings;isLoading=!1;isLoaded=!1;eventHandlerReferences={};constructor(t,e){super(),this.panelEl=t,this.settings=e,this.init()}init(){this.panelEl.setAttribute("data-init",!0),this.panelEl.addEventListener("mouseenter",this.eventHandlerReferences["mouseenter.panel"]=()=>{this.dispatchEvent("panelMouseOver",{index:this.index})}),this.panelEl.addEventListener("mouseleave",this.eventHandlerReferences["mouseleave.panel"]=()=>{this.dispatchEvent("panelMouseOut",{index:this.index})}),this.panelEl.addEventListener("click",this.eventHandlerReferences["click.panel"]=()=>{this.dispatchEvent("panelClick",{index:this.index})}),this.panelEl.addEventListener("mousedown",this.eventHandlerReferences["mousedown.panel"]=()=>{this.dispatchEvent("panelMouseDown",{index:this.index})})}getPosition(){return{left:parseInt(this.panelEl.style.left,10),top:parseInt(this.panelEl.style.top,10)}}setPosition(t,e){this.panelEl.style.left=i(t),this.panelEl.style.top=i(e)}getSize(){return{width:parseInt(this.panelEl.style.width,10),height:parseInt(this.panelEl.style.height,10)}}setSize(t,e){this.panelEl.style.width=i(t),this.panelEl.style.height=i(e)}getContentSize(){return"complete"===e(this.panelEl)&&(this.isLoaded=!0),!1===this.isLoaded?((t=this.panelEl,new Promise((i=>{let s=e(t);if("loading"===s){const n=setInterval((()=>{s=e(t),"complete"===s&&(clearInterval(n),i("complete"))}),100)}else i("complete")}))).then((()=>{this.isLoaded=!0,this.dispatchEvent("imagesComplete",{index:this.index,contentSize:this.getContentSize()})})),"loading"):{width:this.panelEl.scrollWidth,height:this.panelEl.scrollHeight};var t}destroy(){this.panelEl.removeAttribute("style"),this.panelEl.removeAttribute("data-init"),this.panelEl.removeAttribute("data-index"),this.panelEl.removeEventListener("mouseenter",this.eventHandlerReferences["mouseenter.panel"]),this.panelEl.removeEventListener("mouseleave",this.eventHandlerReferences["mouseleave.panel"]),this.panelEl.removeEventListener("click",this.eventHandlerReferences["click.panel"]),this.panelEl.removeEventListener("mousedown",this.eventHandlerReferences["mousedown.panel"])}get index(){return this.#t}set index(t){this.#t=t,this.panelEl.setAttribute("data-index",this.#t)}},o=class extends n{previousWidth=0;previousHeight=0;allowResize=!0;delay=200;handlerReference;timeoutReference;constructor(t=null){super(),null!==t&&(this.delay=t)}addEventListener(t,e){super.addEventListener(t,e),this.handlerReference=this.handler.bind(this),window.addEventListener("resize",this.handlerReference)}removeEventListener(t){super.removeEventListener(t),window.removeEventListener("resize",this.handlerReference)}handler(){!1===this.allowResize||this.previousWidth===window.innerWidth&&this.previousHeight===window.innerHeight||(this.previousWidth=window.innerWidth,this.previousHeight=window.innerHeight,this.allowResize=!1,this.timeoutReference=setTimeout((()=>{this.dispatchEvent("resize"),this.allowResize=!0}),this.delay))}destroy(){clearTimeout(this.timeoutReference)}};class r{accordion;static addOns=[];addOnsInstances=[];activeAddOns=null;constructor(t,e=null){this.accordion=t,this.activeAddOns=e}init(){this.accordion.addOns=this.accordion.addOns||{},(0===this.activeAddOns.length?r.addOns:this.activeAddOns).forEach((t=>{let e=new t(this.accordion);this.addOnsInstances.push(e),this.accordion.addOns[t.name]=e}))}static add(t){"object"==typeof t?r.addOns=[...r.addOns,...t]:"function"==typeof t&&r.addOns.push(t)}destroyAll(){this.addOnsInstances.forEach((t=>{t.destroy()}))}}const l=r,h=class{layerEl;visible=!1;visibleOn="ga-always";styled=!1;data=null;position=null;horizontalProperty=null;verticalProperty=null;horizontalPosition=null;verticalPosition=null;delayTimer=null;stayTimer=null;constructor(t){this.layerEl=t,this.init()}init(){this.layerEl.setAttribute("data-layer-init",!0),this.layerEl.classList.contains("ga-closed")?(this.visibleOn="closed",this.layerEl.style.visibility="hidden"):this.layerEl.classList.contains("ga-opened")?(this.visibleOn="opened",this.layerEl.style.visibility="hidden"):this.setStyle()}setStyle(){this.styled=!0,this.data=this.layerEl.dataset,void 0!==this.data.width&&(this.layerEl.style.width=i(this.data.width)),void 0!==this.data.height&&(this.layerEl.style.height=i(this.data.height)),void 0!==this.data.depth&&(this.layerEl.style.zIndex=this.data.depth),this.position=this.data.position?this.data.position.toLowerCase():"topleft",-1!==this.position.indexOf("right")?this.horizontalProperty="right":-1!==this.position.indexOf("left")?this.horizontalProperty="left":this.horizontalProperty="center",-1!==this.position.indexOf("bottom")?this.verticalProperty="bottom":-1!==this.position.indexOf("top")?this.verticalProperty="top":this.verticalProperty="center",this.setPosition()}setPosition(){let t=this.layerEl.getAttribute("style");this.horizontalPosition=void 0!==this.data.horizontal?this.data.horizontal:0,this.verticalPosition=void 0!==this.data.vertical?this.data.vertical:0,"center"===this.horizontalProperty||"center"===this.horizontalPosition?("IMG"!==this.layerEl.tagName&&(null===t||null!==t&&-1===t.indexOf("width"))&&(this.layerEl.style.whiteSpace="nowrap",this.layerEl.style.width=i(this.layerEl.clientWidth)),this.layerEl.style.marginLeft="auto",this.layerEl.style.marginRight="auto",this.layerEl.style.left=0,this.layerEl.style.right=0):this.layerEl.style[this.horizontalProperty]=i(this.horizontalPosition),"center"===this.verticalProperty||"center"===this.verticalPosition?("IMG"!==this.layerEl.tagName&&(null===t||null!==t&&-1===t.indexOf("height"))&&(this.layerEl.style.whiteSpace="nowrap",this.layerEl.style.height=i(this.layerEl.clientHeight)),this.layerEl.style.marginTop="auto",this.layerEl.style.marginBottom="auto",this.layerEl.style.top=0,this.layerEl.style.bottom=0):this.layerEl.style[this.verticalProperty]=i(this.verticalPosition)}show(t){if(!0===this.visible)return;this.visible=!0,!1===this.styled&&this.setStyle();let e=void 0!==this.data.showOffset?this.data.showOffset:50,i=void 0!==this.data.showDuration?this.data.showDuration/1e3:.4,s=void 0!==this.data.showDelay?this.data.showDelay:10,n=void 0!==this.data.stayDuration?parseInt(this.data.stayDuration,10):-1,a={opacity:0,visibility:"visible"},o={opacity:1},r="";o.transition="opacity "+i+"s",void 0!==this.data.showTransition&&("left"===this.data.showTransition?r=e+"px, 0":"right"===this.data.showTransition?r="-"+e+"px, 0":"up"===this.data.showTransition?r="0, "+e+"px":"down"===this.data.showTransition&&(r="0, -"+e+"px"),a.transform="translate3d("+r+", 0)",o.transform="translate3d(0, 0, 0)",o.transition+=", transform "+i+"s");const l=e=>{e.target===e.currentTarget&&(this.layerEl.removeEventListener("transitionend",l),this.layerEl.style.transition="",-1!==n&&(this.stayTimer=setTimeout((function(){this.hide(),this.stayTimer=null}),n)),void 0!==t&&t())};this.layerEl.addEventListener("transitionend",l);for(let t in a)this.layerEl.style[t]=a[t];this.delayTimer=setTimeout((()=>{for(let t in o)this.layerEl.style[t]=o[t]}),s)}hide(t){if(!1===this.visible)return;let e=void 0!==this.data.hideOffset?this.data.hideOffset:50,i=void 0!==this.data.hideDuration?this.data.hideDuration/1e3:.4,s=void 0!==this.data.hideDelay?this.data.hideDelay:10;this.visible=!1,null!==this.stayTimer&&clearTimeout(this.stayTimer);let n="",a={opacity:0};a.transition="opacity "+i+"s",void 0!==this.data.hideTransition&&("left"===this.data.hideTransition?n="-"+e+"px, 0":"right"===this.data.hideTransition?n=e+"px, 0":"up"===this.data.hideTransition?n="0, -"+e+"px":"down"===this.data.hideTransition&&(n="0, "+e+"px"),a.transform=" translate3d("+n+", 0)",a.transition+=", transform "+i+"s");const o=e=>{e.target===e.currentTarget&&(this.layerEl.removeEventListener("transitionend",o),this.layerEl.style.removeProperty("transition"),!1===this.visible&&(this.layerEl.style.visibility="hidden"),void 0!==t&&t())};this.layerEl.addEventListener("transitionend",o),this.delayTimer=setTimeout((()=>{for(let t in a)this.layerEl.style[t]=a[t]}),s)}isVisible(){return!1!==this.visible&&null!==this.layerEl.offsetParent}destroy(){this.layerEl.removeAttribute("style"),this.layerEl.removeAttribute("data-layer-init"),clearTimeout(this.delayTimer),clearTimeout(this.stayTimer),this.delayTimer=null,this.stayTimer=null}},d=class extends n{videoEl=null;ready=!1;started=!1;state="";constructor(t){super(),this.videoEl=t,this.init()}init(){}play(){}pause(){}stop(){}replay(){}isType(){}isReady(){return this.ready}isStarted(){return this.started}getState(){return this.state}};class c extends d{static vimeoAPIAdded=!1;static vimeoVideos=[];constructor(t){super(t)}static isType(t){return"IFRAME"===t.tagName&&-1!==t.getAttribute("src").indexOf("vimeo.com")}init(){if(this.isInit=!1,void 0!==window.Vimeo)this.setup();else if(c.vimeoVideos.push(this),!1===c.vimeoAPIAdded){c.vimeoAPIAdded=!0;const t=document.createElement("script");t.src="//player.vimeo.com/api/player.js";const e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e);let i=setInterval((()=>{void 0!==window.Vimeo&&(clearInterval(i),c.vimeoVideos.forEach((t=>{t.setup()})))}),100)}}setup(){this.isInit=!0,this.player=new window.Vimeo.Player(this.videoEl),this.ready=!0,this.dispatchEvent("ready"),this.player.on("play",(()=>{!1===this.started&&(this.started=!0,this.dispatchEvent("start")),this.state="playing",this.dispatchEvent("play")})),this.player.on("pause",(()=>{this.state="paused",this.dispatchEvent("pause")})),this.player.on("ended",(()=>{this.state="ended",this.dispatchEvent("ended")}))}play(){if(!0===this.ready)this.player.play();else{const t=setInterval((()=>{!0===this.ready&&(clearInterval(t),this.player.play())}),100)}}pause(){this.player.pause()}stop(){this.player.setCurrentTime(0).then((()=>{this.player.pause(),this.state="stopped"}))}replay(){this.player.setCurrentTime(0).then((()=>{this.player.play()}))}addEventListener(t,e){if(!0===this.isInit)super.addEventListener(t,e);else{const i=setInterval((()=>{!0===this.isInit&&(clearInterval(i),super.addEventListener(t,e))}),100)}}}const p=c;class u extends d{static youtubeAPIAdded=!1;static youtubeVideos=[];constructor(t){super(t)}static isType(t){if("IFRAME"===t.tagName){const e=t.getAttribute("src");if(-1!==e.indexOf("youtube.com")||-1!==e.indexOf("youtu.be"))return!0}return!1}init(){if(this.isInit=!1,void 0!==(window.YT&&window.YT.Player))this.setup();else if(u.youtubeVideos.push(this),!1===u.youtubeAPIAdded){u.youtubeAPIAdded=!0;const t=document.createElement("script");t.src="//www.youtube.com/player_api";const e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e),window.onYouTubePlayerAPIReady=()=>{u.youtubeVideos.forEach((t=>{t.setup()}))}}}setup(){this.isInit=!0,this.player=new window.YT.Player(this.videoEl,{events:{onReady:()=>{this.dispatchEvent("ready"),this.ready=!0},onStateChange:t=>{switch(t.data){case window.YT.PlayerState.PLAYING:!1===this.started&&(this.started=!0,this.dispatchEvent("start")),this.state="playing",this.dispatchEvent("play");break;case window.YT.PlayerState.PAUSED:this.state="paused",this.dispatchEvent("pause");break;case window.YT.PlayerState.ENDED:this.state="ended",this.dispatchEvent("ended")}}}})}play(){if(!0===this.ready)this.player.playVideo();else{const t=setInterval((()=>{!0===this.ready&&(clearInterval(t),this.player.playVideo())}),100)}}pause(){!0==!!window.navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?this.stop():this.player.pauseVideo()}stop(){this.player.seekTo(1),this.player.stopVideo(),this.state="stopped"}replay(){this.player.seekTo(1),this.player.playVideo()}addEventListener(t,e){if(!0===this.isInit)super.addEventListener(t,e);else{const i=setInterval((()=>{!0===this.isInit&&(clearInterval(i),super.addEventListener(t,e))}),100)}}}const g=u;class m extends n{static players=[];player=null;videoEl;isIOS=!!window.navigator.userAgent.match(/(iPad|iPhone|iPod)/g);constructor(t){super(),this.videoEl=t,this.init()}static addPlayer(t){-1===m.players.indexOf(t)&&m.players.unshift(t)}init(){const t=this.videoEl.getAttribute("id"),e=m.players.find((t=>t.isType(this.videoEl)));this.player=new e(this.videoEl),null!==this.player&&["ready","start","play","pause","ended"].forEach((e=>{const i="video"+e.charAt(0).toUpperCase()+e.slice(1);this.player.addEventListener(e,(()=>{this.dispatchEvent(i,{video:t})}))}))}play(){!0===this.isIOS&&!1===this.player.isStarted()||"playing"===this.player.getState()||this.player.play()}stop(){!0===this.isIOS&&!1===this.player.isStarted()||"stopped"===this.player.getState()||this.player.stop()}pause(){!0===this.isIOS&&!1===this.player.isStarted()||"paused"===this.player.getState()||this.player.pause()}replay(){!0===this.isIOS&&!1===this.player.isStarted()||this.player.replay()}destroy(){!0===this.player.isStarted()&&this.stop(),this.player.removeEventListener("ready"),this.player.removeEventListener("start"),this.player.removeEventListener("play"),this.player.removeEventListener("pause"),this.player.removeEventListener("ended")}}m.addPlayer(class extends d{constructor(t){super(t)}static isType(t){return"VIDEO"===t.tagName}init(){this.player=this.videoEl,this.ready=!0,this.dispatchEvent("ready"),this.player.addEventListener("play",(()=>{!1===this.started&&(this.started=!0,this.dispatchEvent("start")),this.state="playing",this.dispatchEvent("play")})),this.player.addEventListener("pause",(()=>{this.state="paused",this.dispatchEvent("pause")})),this.player.addEventListener("ended",(()=>{this.state="ended",this.dispatchEvent("ended")}))}play(){if(!0===this.ready)this.player.play();else{const t=setInterval((()=>{!0===this.ready&&(clearInterval(t),this.player.play())}),100)}}pause(){this.player.pause()}stop(){this.player.currentTime=0,this.player.pause(),this.state="stopped"}replay(){this.player.currentTime=0,this.player.play()}}),m.addPlayer(class extends d{constructor(t){super(t)}static isType(t){return!(null===t.getAttribute("data-videojs-id")&&!t.classList.contains("video-js")||void 0===window.videojs)}init(){const t=this.videoEl.classList.contains("video-js")?this.videoEl.getAttribute("id"):this.videoEl.getAttribute("data-videojs-id");this.player=window.videojs(t),this.player.ready((()=>{this.ready=!0,this.dispatchEvent("ready"),this.player.on("play",(()=>{!1===this.started&&(this.started=!0,this.dispatchEvent("start")),this.state="playing",this.dispatchEvent("play")})),this.player.on("pause",(()=>{this.state="paused",this.dispatchEvent("pause")})),this.player.on("ended",(()=>{this.state="ended",this.dispatchEvent("ended")}))}))}play(){this.player.play()}pause(){this.player.pause()}stop(){this.player.currentTime(0),this.player.pause(),this.state="stopped"}replay(){this.player.currentTime(0),this.player.play()}}),m.addPlayer(g),m.addPlayer(p);const v=m;l.add([class{namespace="autoplay";accordion;settings;autoplayTimer;autoplayState="stopped";autoplayIndex=-1;isHover=!1;eventHandlerReferences={};defaults={autoplay:!0,autoplayDelay:5e3,autoplayDirection:"normal",autoplayOnHover:"pause"};constructor(t){this.accordion=t,this.init()}init(){this.accordion.addEventListener("update."+this.namespace,this.updateHandler.bind(this))}updateHandler(){this.settings={...this.defaults,...this.accordion.settings},!0===this.settings.autoplay&&"stopped"===this.autoplayState?(this.accordion.addEventListener("panelOpen."+this.namespace,(()=>{this.panelOpenHandler()})),this.accordion.addEventListener("panelOpenComplete."+this.namespace,(()=>{this.panelOpenCompleteHandler()})),this.accordion.addEventListener("panelsClose."+this.namespace,(t=>{-1!==t.detail.previousIndex&&(this.autoplayIndex=t.detail.previousIndex)})),this.accordion.addEventListener("pageScroll."+this.namespace,(()=>{this.autoplayIndex=this.accordion.getFirstPanelFromPage()-1})),this.accordion.accordionEl.addEventListener("mouseenter",this.eventHandlerReferences.mouseenter=()=>{this.mouseEnterHandler()}),this.accordion.accordionEl.addEventListener("mouseleave",this.eventHandlerReferences.mouseleave=()=>{this.mouseLeaveHandler()}),this.autoplayState="running",this.start()):!0===this.settings.autoplay&&"running"===this.autoplayState&&(this.accordion.removeEventListener("panelOpen."+this.namespace),this.accordion.removeEventListener("panelOpenComplete."+this.namespace),this.accordion.removeEventListener("mouseenter."+this.namespace),this.accordion.removeEventListener("mouseleave."+this.namespace),this.autoplayState="stopped",this.stop())}panelOpenHandler(){"running"===this.autoplayState&&(this.stop(),this.autoplayState="paused")}panelOpenCompleteHandler(){(!0!==this.isHover||"pause"!==this.settings.autoplayOnHover&&"stop"!==this.settings.autoplayOnHover)&&"paused"===this.autoplayState&&(this.start(),this.autoplayState="running")}mouseEnterHandler(){this.isHover=!0,"running"!==this.autoplayState||"pause"!==this.settings.autoplayOnHover&&"stop"!==this.settings.autoplayOnHover||(this.stop(),this.autoplayState="paused")}mouseLeaveHandler(){this.isHover=!1,!0===this.settings.autoplay&&"paused"===this.autoplayState&&"stop"!==this.settings.autoplayOnHover&&(this.start(),this.autoplayState="running")}start(){this.autoplayTimer=setTimeout((()=>{-1!==this.autoplayIndex&&(this.accordion.currentIndex=this.autoplayIndex,this.autoplayIndex=-1),"normal"===this.settings.autoplayDirection?this.accordion.nextPanel():"backwards"===this.settings.autoplayDirection&&this.accordion.previousPanel()}),this.settings.autoplayDelay)}stop(){clearTimeout(this.autoplayTimer)}destroy(){clearTimeout(this.autoplayTimer),this.accordion.removeEventListener("update."+this.namespace),this.accordion.removeEventListener("panelOpen."+this.namespace),this.accordion.removeEventListener("panelOpenComplete."+this.namespace),this.accordion.removeEventListener("panelsClose."+this.namespace),this.accordion.removeEventListener("pageScroll."+this.namespace),this.accordion.accordionEl.removeEventListener("mouseenter",this.eventHandlerReferences.mouseenter),this.accordion.accordionEl.removeEventListener("mouseleave",this.eventHandlerReferences.mouseleave)}},class{namespace="breakpoints";accordion;breakpoints;originalSettings={};orderedBreakpoints=[];currentBreakpoint=-1;constructor(t){this.accordion=t,null!==this.accordion.settings.breakpoints&&this.accordion.addEventListener("beforeInit."+this.namespace,(()=>{this.init()}))}init(){this.breakpoints={...this.accordion.settings.breakpoints},this.originalSettings={...this.accordion.settings};for(let t in this.breakpoints)this.orderedBreakpoints.push({size:parseInt(t,10),properties:this.breakpoints[t]});this.orderedBreakpoints=this.orderedBreakpoints.sort(((t,e)=>t.size>=e.size?1:-1)),this.accordion.addEventListener("beforeResize."+this.namespace,(()=>{const t=this.getCurrentSettings();!1!==t&&(this.accordion.settings={...t},this.accordion.update())}))}getCurrentSettings(){if(null!==this.breakpoints&&this.orderedBreakpoints.length>0){if(window.innerWidth>this.orderedBreakpoints[this.orderedBreakpoints.length-1].size&&-1!==this.currentBreakpoint)return this.currentBreakpoint=-1,this.originalSettings;for(let t=0,e=this.orderedBreakpoints.length;t<e;t++)if(window.innerWidth<=this.orderedBreakpoints[t].size){if(this.currentBreakpoint!==this.orderedBreakpoints[t].size){const e={...this.originalSettings,...this.orderedBreakpoints[t].properties};return this.currentBreakpoint=this.orderedBreakpoints[t].size,e}break}}return!1}destroy(){this.accordion.removeEventListener("beforeInit."+this.namespace),this.accordion.removeEventListener("beforeResize."+this.namespace)}},class{namespace="buttons";accordion;settings;buttonsEl=null;eventHandlerReferences={};defaults={buttons:!0};constructor(t){this.accordion=t,this.init()}init(){this.accordion.addEventListener("update."+this.namespace,this.updateHandler.bind(this)),this.accordion.addEventListener("pageScroll."+this.namespace,(t=>{void 0!==this.buttonsEl&&(this.buttonsEl.getElementsByClassName("ga-selected")[0].classList.remove("ga-selected"),this.buttonsEl.getElementsByClassName("ga-pagination-button")[t.detail.index].classList.add("ga-selected"))}))}updateHandler(){this.settings={...this.defaults,...this.accordion.settings},this.buttonsEl=this.accordion.accordionEl.getElementsByClassName("ga-pagination-buttons")[0];const t=this.accordion.getTotalPages();!0===this.settings.buttons&&t>1&&void 0===this.buttonsEl?this.createButtons():!0===this.settings.buttons&&void 0!==this.buttonsEl&&t!==this.buttonsEl.getElementsByClassName("ga-pagination-button").length?this.adjustButtons():(!1===this.settings.buttons&&void 0!==this.buttonsEl||t<=1&&void 0!==this.buttonsEl)&&this.removeButtons()}createButtons(){this.buttonsEl=document.createElement("div"),this.buttonsEl.classList.add("ga-pagination-buttons"),this.accordion.accordionEl.appendChild(this.buttonsEl);for(let t=0;t<this.accordion.getTotalPages();t++){const e=document.createElement("div");e.classList.add("ga-pagination-button"),this.buttonsEl.appendChild(e),t===this.accordion.getCurrentPage()&&e.classList.add("ga-selected");const i=()=>{this.accordion.gotoPage(t)};this.eventHandlerReferences["click.button"+t]=i,e.addEventListener("click",i)}this.accordion.accordionEl.classList.add("ga-has-buttons")}adjustButtons(){this.removeButtons(),this.createButtons()}removeButtons(){Array.from(this.buttonsEl.getElementsByClassName("ga-pagination-button")).forEach(((t,e)=>{const i=this.eventHandlerReferences["click.button"+e];t.removeEventListener("click",i)})),this.buttonsEl.remove(),this.accordion.accordionEl.classList.remove("ga-has-buttons")}destroy(){this.accordion.removeEventListener("pageScroll."+this.namespace),this.accordion.removeEventListener("update."+this.namespace),this.removeButtons()}},class{namespace="deeplinking";accordion;settings;defaults={updateHash:!1};eventHandlerReferences={};constructor(t){this.accordion=t,this.init()}init(){this.settings={...this.defaults,...this.accordion.settings},this.accordion.addEventListener("init."+this.namespace,(()=>{this.gotoHash(window.location.hash)})),this.accordion.addEventListener("panelOpen."+this.namespace,(t=>{if(!0===this.settings.updateHash){let e=this.accordion.accordionEl.getElementsByClassName("ga-panel")[t.detail.index].getAttribute("id");null===e&&(e=t.detail.index),window.location.hash=this.accordion.accordionEl.getAttribute("id")+"/"+e}})),window.addEventListener("hashchange",this.eventHandlerReferences.hashchange=()=>{this.gotoHash(window.location.hash)})}parseHash(t){if(""!==t){const e=(t=t.substring(1)).split("/").pop(),i=t.slice(0,-e.toString().length-1);if(this.accordion.accordionEl.getAttribute("id")===i)return{accordionId:i,panelId:e}}return!1}gotoHash(t){const e=this.parseHash(t);if(!1===e)return;const{panelId:i}=e,s=parseInt(i,10);if(isNaN(s)){const t=document.getElementById(i),e=Array.from(this.accordion.accordionEl.getElementsByClassName("ga-panel")).indexOf(t);-1!==e&&e!==this.accordion.getCurrentIndex()&&this.accordion.openPanel(e)}else s!==this.accordion.getCurrentIndex()&&this.accordion.openPanel(s)}destroy(){this.accordion.removeEventListener("init."+this.namespace),this.accordion.removeEventListener("panelOpen."+this.namespace),window.removeEventListener("hashchange",this.eventHandlerReferences.hashchange)}},class{namespace="keyboards";accordion;settings;isEnabled=!1;eventHandlerReferences={};defaults={keyboard:!0,keyboardOnlyOnFocus:!1,keyboardTarget:"panel"};constructor(t){this.accordion=t,this.init()}init(){this.accordion.addEventListener("update."+this.namespace,this.updateHandler.bind(this))}updateHandler(){this.settings={...this.defaults,...this.accordion.settings},!0===this.settings.keyboard&&!1===this.isEnabled&&(this.isEnabled=!0,this.enable()),!1===this.settings.keyboard&&!0===this.isEnabled&&(this.isEnabled=!1,this.disable())}enable(){let t=!1;this.accordion.accordionEl.addEventListener("focus",this.eventHandlerReferences.focus=()=>{t=!0}),this.accordion.accordionEl.addEventListener("blur",this.eventHandlerReferences.blur=()=>{t=!1});const e=e=>{if(!0!==this.settings.keyboardOnlyOnFocus||!1!==t)if(37===e.which)"panel"===this.settings.keyboardTarget?this.accordion.previousPanel():this.accordion.previousPage();else if(39===e.which)"panel"===this.settings.keyboardTarget?this.accordion.nextPanel():this.accordion.nextPage();else if(13===e.which){const t=this.accordion.accordionEl.getElementsByClassName("ga-panel")[this.accordion.getCurrentIndex()].querySelector(".ga-panel > a");null!==t&&t.click()}};this.eventHandlerReferences.keydown=e,document.addEventListener("keydown",e)}disable(){this.accordion.accordionEl.removeEventListener("focus",this.eventHandlerReferences.focus),this.accordion.accordionEl.removeEventListener("blur",this.eventHandlerReferences.blur),document.removeEventListener("keydown",this.eventHandlerReferences.keydown)}destroy(){this.accordion.removeEventListener("update."+this.namespace),this.disable()}},class{namespace="layers";accordion;settings;layers=[];constructor(t){this.accordion=t,this.init()}init(){this.settings={...this.defaults,...this.accordion.settings},this.accordion.addEventListener("update."+this.namespace,this.updateHandler.bind(this)),this.accordion.addEventListener("panelOpen."+this.namespace,this.panelOpenHandler.bind(this)),this.accordion.addEventListener("panelsClose."+this.namespace,(t=>{this.handleLayersInClosedState(t.detail.previousIndex)}))}updateHandler(){this.settings={...this.defaults,...this.accordion.settings},this.accordion.panels.forEach(((t,e)=>{let i=t.panelEl;Array.from(i.querySelectorAll(".ga-layer:not([data-layer-init])")).forEach((t=>{let i=new h(t);this.layers.push({layer:i,panelIndex:e})})),this.accordion.currentIndex===e?this.handleLayersInOpenedState(e):this.handleLayersInClosedState(e)}))}panelOpenHandler(t){this.handleLayersInClosedState(t.detail.previousIndex),this.handleLayersInOpenedState(t.detail.index)}handleLayersInOpenedState(t){this.layers.filter((e=>e.panelIndex===t)).forEach((t=>{const e=t.layer;"opened"===e.visibleOn?e.show():"closed"===e.visibleOn&&e.hide()}))}handleLayersInClosedState(t){this.layers.filter((e=>e.panelIndex===t)).forEach((t=>{const e=t.layer;"opened"===e.visibleOn?e.hide():"closed"===e.visibleOn&&e.show()}))}destroy(){this.accordion.removeEventListener("update."+this.namespace),this.accordion.removeEventListener("panelOpen."+this.namespace),this.layers.forEach((t=>{t.destroy()}))}},class{namespace="lazyloading";accordion;constructor(t){this.accordion=t,this.init()}init(){this.accordion.addEventListener("update."+this.namespace,this.checkAndLoadVisibleImages.bind(this)),this.accordion.addEventListener("pageScroll."+this.namespace,this.checkAndLoadVisibleImages.bind(this))}checkAndLoadVisibleImages(){const t=this.accordion.getFirstPanelFromPage(),e=this.accordion.getLastPanelFromPage();(e!==this.accordion.getTotalPanels()-1?this.accordion.panels.slice(t,e+1):this.accordion.panels.slice(t)).forEach((t=>{const e=t.panelEl;null===e.getAttribute("data-loaded")&&(e.setAttribute("data-loaded",!0),Array.from(e.getElementsByTagName("img")).forEach((t=>{this.loadImage(t)})))}))}loadImage(t,e=null){const i=new Image;i.setAttribute("class",t.getAttribute("class")),i.setAttribute("style",t.getAttribute("style"));for(let e in t.dataset)i.setAttribute("data-"+e,t.dataset[e]);null!==t.getAttribute("width")&&i.setAttribute("width",t.getAttribute("width")),null!==t.getAttribute("height")&&i.setAttribute("height",t.getAttribute("height")),null!==t.getAttribute("alt")&&i.setAttribute("alt",t.getAttribute("alt")),null!==t.getAttribute("title")&&i.setAttribute("title",t.getAttribute("title")),null!==t.getAttribute("data-src")?(i.setAttribute("src",t.getAttribute("data-src")),i.removeAttribute("data-src")):i.setAttribute("src",t.getAttribute("src")),null!==t.getAttribute("data-srcset")&&(i.setAttribute("srcset",t.getAttribute("data-srcset")),i.removeAttribute("data-srcset")),t.after(i),t.remove(),t=null,"function"==typeof e&&e(i)}destroy(){this.accordion.removeEventListener("update."+this.namespace),this.accordion.removeEventListener("gotoSlide."+this.namespace)}},class{namespace="retina";accordion;constructor(t){this.accordion=t,this.init()}init(){window.devicePixelRatio<2||this.accordion.addEventListener("update."+this.namespace,this.updateHandler.bind(this))}updateHandler(){this.accordion.panels.forEach((t=>{const e=t.panelEl;null===e.getAttribute("data-retina-loaded")&&(e.setAttribute("data-retina-loaded",!0),Array.from(e.querySelectorAll("img[data-retina]")).forEach((t=>{null!==t.getAttribute("data-src")?(t.setAttribute("data-src",t.getAttribute("data-retina")),t.removeAttribute("data-retina")):this.loadImage(t)})))}))}loadImage(t,e=null){let i=!1,s="";if(null!==t.getAttribute("data-retina")&&(i=!0,s=t.getAttribute("data-retina")),null!==t.getAttribute("data-src")&&(!1===i&&(s=t.getAttribute("data-src")),t.removeAttribute("data-src")),""===s)return;const n=new Image;n.setAttribute("class",t.getAttribute("class")),n.setAttribute("style",t.getAttribute("style"));for(let e in t.dataset)n.setAttribute("data-"+e,t.dataset[e]);null!==t.getAttribute("width")&&n.setAttribute("width",t.getAttribute("width")),null!==t.getAttribute("height")&&n.setAttribute("height",t.getAttribute("height")),null!==t.getAttribute("alt")&&n.setAttribute("alt",t.getAttribute("alt")),null!==t.getAttribute("title")&&n.setAttribute("title",t.getAttribute("title")),null!==t.getAttribute("data-srcset")&&(n.setAttribute("srcset",t.getAttribute("data-srcset")),n.removeAttribute("data-srcset")),t.after(n),t.remove(),t=null,n.setAttribute("src",s),"function"==typeof e&&e(n)}destroy(){this.accordion.removeEventListener("update."+this.namespace)}},class{namespace="touchswipe";accordion;settings;isTouchSwipeEnabled=!1;touchStartPoint={x:0,y:0};touchEndPoint={x:0,y:0};touchDistance={x:0,y:0};touchStartPosition=0;isTouchMoving=!1;touchSwipeEvents={startEvent:["touchstart","mousedown"],moveEvent:["touchmove","mousemove"],endEvent:["touchend","mouseup"]};previousStartEvent="";eventHandlerReferences={};defaults={touchSwipe:!0,touchSwipeThreshold:50};constructor(t){this.accordion=t,this.init()}init(){this.accordion.addEventListener("update."+this.namespace,this.updateHandler.bind(this))}updateHandler(){this.settings={...this.defaults,...this.accordion.settings},!0===this.settings.touchSwipe&&!1===this.isTouchSwipeEnabled?this.add():!1===this.settings.touchSwipe&&!0===this.isTouchSwipeEnabled&&this.destroy(),this.accordion.getTotalPages()>1?this.accordion.panelsContainerEl.classList.add("ga-grab"):this.accordion.panelsContainerEl.classList.remove("ga-grab")}add(){this.isTouchSwipeEnabled=!0,Array.from(this.touchSwipeEvents.startEvent).forEach((t=>{this.accordion.panelsContainerEl.addEventListener(t,this.eventHandlerReferences[t]=t=>{this.touchStartHandler(t)})})),this.accordion.panelsContainerEl.addEventListener("dragstart",this.eventHandlerReferences.dragstart=t=>{t.preventDefault()}),Array.from(this.accordion.panelsContainerEl.getElementsByTagName("a")).forEach((t=>{t.addEventListener("click",this.eventHandlerReferences["click.link"]=t=>{this.accordion.accordionEl.classList.contains("ga-swiping")&&t.preventDefault()})})),this.accordion.panelsContainerEl.addEventListener("touchstart",this.eventHandlerReferences["touchstart.link"]=()=>{const t=this.accordion.panelsContainerEl.querySelectorAll("[data-disabledlink]");Array.from(t).forEach((t=>{t.style.removeProperty("pointer-events"),t.removeAttribute("data-disabledlink")}))}),Array.from(this.accordion.panelsContainerEl.getElementsByTagName("a")).forEach((t=>{t.addEventListener("touchend",this.eventHandlerReferences["touchend.link"]=()=>{const e=function(t,e){if(null==t||void 0===t.tagName)return null;for(;!t.classList.contains(e)&&t.tagName!==e.toUpperCase();){if("HTML"===t.tagName)return null;t=t.parentElement}return t}(t,"ga-panel");null!==e&&!1===e.classList.contains("ga-opened")&&(t.style["pointer-events"]="none",t.setAttribute("data-disabledlink",!0))})}))}touchStartHandler(t){if("mousedown"===t.type&&"touchstart"===this.previousStartEvent)return void(this.previousStartEvent=t.type);if(this.previousStartEvent=t.type,t.target.classList.contains("ga-selectable"))return;const e=void 0!==t.touches?t.touches[0]:t,i="horizontal"===this.settings.orientation?"left":"top";this.touchStartPoint.x=e.pageX||e.clientX,this.touchStartPoint.y=e.pageY||e.clientY,this.touchStartPosition=parseInt(this.accordion.panelsContainerEl.style[i],10),this.touchDistance.x=this.touchDistance.y=0,Array.from(this.touchSwipeEvents.moveEvent).forEach((t=>{this.accordion.panelsContainerEl.addEventListener(t,this.eventHandlerReferences[t]=t=>{this.touchMoveHandler(t)})})),Array.from(this.touchSwipeEvents.endEvent).forEach((t=>{document.addEventListener(t,this.eventHandlerReferences[t]=t=>{this.touchEndHandler(t)})})),this.accordion.panelsContainerEl.classList.replace("ga-grab","ga-grabbing")}touchMoveHandler(t){const e=void 0!==t.touches?t.touches[0]:t,s="horizontal"===this.settings.orientation?"left":"top";this.isTouchMoving=!0,!1===this.accordion.accordionEl.classList.contains("ga-swiping")&&this.accordion.accordionEl.classList.add("ga-swiping"),this.touchEndPoint.x=e.pageX||e.clientX,this.touchEndPoint.y=e.pageY||e.clientY,this.touchDistance.x=this.touchEndPoint.x-this.touchStartPoint.x,this.touchDistance.y=this.touchEndPoint.y-this.touchStartPoint.y;let n="horizontal"===this.settings.orientation?this.touchDistance.x:this.touchDistance.y;if(!0===this.allowOppositeScrolling)return;t.preventDefault();const a=parseInt(this.accordion.panelsContainerEl.style[s],10);(a>=0&&0===this.accordion.currentPage||a<=-this.accordion.totalPanelsSize+this.accordion.totalSize&&this.accordion.currentPage===this.accordion.getTotalPages()-1)&&(n*=.2),this.accordion.panelsContainerEl.style[s]=i(this.touchStartPosition+n)}touchEndHandler(){let t="horizontal"===this.settings.orientation?this.touchDistance.x:this.touchDistance.y;const e="horizontal"===this.settings.orientation?"left":"top";Array.from(this.touchSwipeEvents.moveEvent).forEach((t=>{this.accordion.panelsContainerEl.removeEventListener(t,this.eventHandlerReferences[t])})),Array.from(this.touchSwipeEvents.endEvent).forEach((t=>{document.removeEventListener(t,this.eventHandlerReferences[t])})),this.accordion.panelsContainerEl.classList.replace("ga-grabbing","ga-grab"),this.accordion.accordionEl.classList.contains("ga-swiping")&&setTimeout((()=>{this.accordion.accordionEl.classList.remove("ga-swiping")}),100),!1!==this.isTouchMoving&&(this.isTouchMoving=!1,t>this.settings.touchSwipeThreshold?this.accordion.currentPage>0?this.accordion.previousPage():this.accordion.panelsContainerEl.style[e]=this.touchStartPosition:-t>this.settings.touchSwipeThreshold?this.accordion.currentPage<this.accordion.getTotalPages()-1?this.accordion.nextPage():this.accordion.gotoPage(this.accordion.currentPage):Math.abs(t)<this.settings.touchSwipeThreshold&&(this.accordion.panelsContainerEl.style[e]=i(this.touchStartPosition)))}destroy(){this.isTouchSwipeEnabled=!1,this.accordion.removeEventListener("update."+this.namespace),this.accordion.panelsContainerEl.removeEventListener("dragstart",this.eventHandlerReferences.dragstart),this.accordion.panelsContainerEl.removeEventListener("touchstart",this.eventHandlerReferences["touchstart.link"]),Array.from(this.accordion.panelsContainerEl.getElementsByTagName("a")).forEach((t=>{t.removeEventListener("click",this.eventHandlerReferences["click.link"]),t.removeEventListener("touchend",this.eventHandlerReferences["touchend.link"])})),Array.from([...this.touchSwipeEvents.startEvent,...this.touchSwipeEvents.moveEvent]).forEach((t=>{this.accordion.panelsContainerEl.removeEventListener(t,this.eventHandlerReferences[t])})),Array.from(this.touchSwipeEvents.endEvent).forEach((t=>{document.removeEventListener(t,this.eventHandlerReferences[t])})),this.accordion.panelsContainerEl.classList.remove("ga-grab")}},class{namespace="swapbackground";accordion;settings;eventHandlerReferences={};defaults={swapBackgroundDuration:700,fadeOutBackground:!1};constructor(t){this.accordion=t,this.init()}init(){this.settings={...this.defaults,...this.accordion.settings},this.accordion.addEventListener("panelOpen."+this.namespace,(t=>{const e=this.accordion.getPanelAt(t.detail.index),i=e.panelEl.getElementsByClassName("ga-background")[0],s=e.panelEl.getElementsByClassName("ga-background-opened")[0];if(void 0!==s&&(s.style.visibility="visible",s.style.opacity=0,this.fadeIn(s),void 0!==i&&!0===this.settings.fadeOutBackground&&this.fadeOut(i)),-1!==t.detail.previousIndex&&t.detail.index!==t.detail.previousIndex){const e=this.accordion.getPanelAt(t.detail.previousIndex),i=e.panelEl.getElementsByClassName("ga-background")[0],s=e.panelEl.getElementsByClassName("ga-background-opened")[0];void 0!==s&&(this.fadeOut(s),void 0!==i&&!0===this.settings.fadeOutBackground&&this.fadeIn(i))}})),this.accordion.addEventListener("panelsClose."+this.namespace,(t=>{if(-1===t.detail.previousIndex)return;const e=this.accordion.getPanelAt(t.detail.previousIndex),i=e.panelEl.getElementsByClassName("ga-background")[0],s=e.panelEl.getElementsByClassName("ga-background-opened")[0];void 0!==s&&(this.fadeOut(s),void 0!==i&&!0===this.settings.fadeOutBackground&&this.fadeIn(i))}))}fadeIn(t){t.style.visibility="visible",t.removeEventListener("transitionend",this.eventHandlerReferences["transitionend.fadein"]),t.addEventListener("transitionend",this.eventHandlerReferences["transitionend.fadein"]=e=>{e.target===e.currentTarget&&(t.removeEventListener("transitionend",this.eventHandlerReferences["transitionend.fadein"]),t.style.removeProperty("transition"))}),setTimeout((()=>{t.style.opacity=1,t.style.transition="all "+this.settings.swapBackgroundDuration/1e3+"s"}),100)}fadeOut(t){t.removeEventListener("transitionend",this.eventHandlerReferences["transitionend.fadeout"]),t.addEventListener("transitionend",this.eventHandlerReferences["transitionend.fadeout"]=e=>{e.target===e.currentTarget&&(t.removeEventListener("transitionend",this.eventHandlerReferences["transitionend.fadeout"]),t.style.removeProperty("transition"),t.style.visibility="hidden")}),setTimeout((()=>{t.style.opacity=0,t.style.transition="all "+this.settings.swapBackgroundDuration/1e3+"s"}),100)}destroy(){this.removeEventListener("panelOpen."+this.namespace),this.removeEventListener("panelsClose."+this.namespace)}},class{namespace="mousewheel";accordion;settings;isEnabled=!1;allowMouseWheelScroll=!0;eventHandlerReferences={};defaults={mouseWheel:!0,mouseWheelDirection:"normal",mouseWheelSensitivity:10,mouseWheelTarget:"panel"};constructor(t){this.accordion=t,this.init()}init(){this.accordion.addEventListener("update."+this.namespace,this.updateHandler.bind(this))}updateHandler(){this.settings={...this.defaults,...this.accordion.settings},!0===this.settings.mouseWheel&&!1===this.isEnabled&&(this.isEnabled=!0,this.enable()),!1===this.settings.mouseWheel&&!0===this.isEnabled&&(this.isEnabled=!1,this.disable())}enable(){this.accordion.accordionEl.addEventListener("wheel",this.eventHandlerReferences.wheel=t=>{t.preventDefault();let e=t.deltaY*("normal"===this.settings.mouseWheelDirection?1:-1);!0===this.allowMouseWheelScroll&&Math.abs(e)>=this.settings.mouseWheelSensitivity&&(this.allowMouseWheelScroll=!1,setTimeout((()=>{this.allowMouseWheelScroll=!0}),500),e>=this.settings.mouseWheelSensitivity?"page"===this.settings.mouseWheelTarget?this.accordion.nextPage():this.accordion.nextPanel():e<=-this.settings.mouseWheelSensitivity&&("page"===this.settings.mouseWheelTarget?this.accordion.previousPage():this.accordion.previousPanel()))})}disable(){this.accordion.accordionEl.removeEventListener("wheel",this.eventHandlerReferences.wheel)}destroy(){this.accordion.removeEventListener("update."+this.namespace),this.disable()}},class{namespace="video";accordion=null;settings=null;videoReferences={};preinitVideoClickHandler=null;defaults={openPanelVideoAction:"none",closePanelVideoAction:"pauseVideo",playVideoAction:"stopAutoplay",pauseVideoAction:"none",endVideoAction:"none"};constructor(t){this.accordion=t,this.init()}init(){this.accordion.addEventListener("update."+this.namespace,this.updateHandler.bind(this)),this.accordion.addEventListener("panelOpen."+this.namespace,this.panelOpenHandler.bind(this)),this.accordion.addEventListener("panelOpenComplete."+this.namespace,this.panelOpenCompleteHandler.bind(this))}updateHandler(){this.settings={...this.defaults,...this.accordion.settings},Array.from(this.accordion.accordionEl.querySelectorAll(".ga-video:not(a):not([data-video-init])")).forEach((t=>{this.initVideo(t)})),Array.from(this.accordion.accordionEl.querySelectorAll("a.ga-video:not([data-video-preinit])")).forEach((t=>{this.preinitVideo(t)}))}initVideo(t){t.setAttribute("data-video-init",!0);const e=new v(t),i=(parseInt((new Date).valueOf(),10)*Math.floor(1e3*Math.random())).toString();t.setAttribute("data-video-ref",i),this.videoReferences[i]=e,e.addEventListener("videoPlay",(()=>{"stopAutoplay"===this.settings.playVideoAction&&void 0!==this.accordion.addOns.Autoplay&&(this.accordion.addOns.Autoplay.stop(),this.settings.autoplay=!1,this.accordion.addOns.Autoplay.settings.autoplay=!1)})),e.addEventListener("videoPause",(()=>{"startAutoplay"===this.settings.pauseVideoAction&&void 0!==this.accordion.addOns.Autoplay&&(this.settings.autoplay=!0,this.accordion.addOns.Autoplay.settings.autoplay=!0,this.accordion.addOns.Autoplay.stop(),this.accordion.addOns.Autoplay.start())})),e.addEventListener("videoEnded",(()=>{"startAutoplay"===this.settings.endVideoAction&&void 0!==this.accordion.addOns.Autoplay?(this.settings.autoplay=!0,this.accordion.addOns.Autoplay.settings.autoplay=!0,this.accordion.addOns.Autoplay.stop(),this.accordion.addOns.Autoplay.start()):"nextPanel"===this.settings.endVideoAction?this.accordion.nextPanel():"replayVideo"===this.settings.endVideoAction&&e.replay()}))}preinitVideo(t){t.setAttribute("data-video-preinit",!0),this.preinitVideoClickHandler=t=>{let e=t.target;if(this.accordion.accordionEl.classList.contains("ga-swiping")||null!==e.parentElement.querySelector(".ga-video[data-video-init]"))return;t.preventDefault();let i,s,n,a,o,r,l,h=e.getAttribute("href"),d=e.getElementsByTagName("img")[0],c=d.getAttribute("width")||d.clientWidth,p=d.getAttribute("height")||d.clientHeight;-1!==h.indexOf("youtube")||-1!==h.indexOf("youtu.be")?s="youtube":-1!==h.indexOf("vimeo")&&(s="vimeo"),n="youtube"===s?/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/:/(www\.)?vimeo.com\/(\d+)/,a=h.match(n),o=a[2],r="youtube"===s?"//www.youtube.com/embed/"+o+"?enablejsapi=1&wmode=opaque":"//player.vimeo.com/video/"+o,l=h.split("?")[1],void 0!==l&&(l=l.split("&"),l.forEach((t=>{-1===t.indexOf(o)&&(r+="&"+t)}))),i=document.createElement("iframe"),i.setAttribute("src",r),i.setAttribute("width",c),i.setAttribute("height",p),i.setAttribute("class",e.getAttribute("class")),i.setAttribute("frameborder",0),i.setAttribute("allowfullscreen","allowfullscreen"),e.parentElement.insertBefore(i,e),this.initVideo(i),this.videoReferences[i.getAttribute("data-video-ref")].play(),e.style.display="none"},t.addEventListener("click",this.preinitVideoClickHandler)}panelOpenHandler(t){if(-1===t.detail.previousIndex)return;const e=this.accordion.panelsContainerEl.getElementsByClassName("ga-panel")[t.detail.previousIndex].querySelector(".ga-video[data-video-init]");if(null===e)return;const i=this.videoReferences[e.getAttribute("data-video-ref")];null!==i&&("stopVideo"===this.settings.closePanelVideoAction?i.stop():"pauseVideo"===this.settings.closePanelVideoAction?i.pause():"removeVideo"===this.settings.closePanelVideoAction&&(null!==e.parentElement.querySelector("a.ga-video")?(e.parentElement.querySelector("a.ga-video").style.removeProperty("display"),i.destroy(),e.remove()):i.stop()))}panelOpenCompleteHandler(t){if("playVideo"===this.settings.openPanelVideoAction&&t.detail.index===this.accordion.getCurrentIndex()){const e=this.accordion.panelsContainerEl.getElementsByClassName("ga-panel")[t.detail.index].querySelector(".ga-video[data-video-init]"),i=this.accordion.panelsContainerEl.getElementsByClassName("ga-panel")[t.detail.index].querySelector(".ga-video[data-video-preinit]");if(null!==e){const t=this.videoReferences[t.getAttribute("data-video-ref")];t.play()}else null!==i&&i.dispatchEvent("click");"stopAutoplay"===this.settings.playVideoAction&&void 0!==this.accordion.addOns.Autoplay&&(this.accordion.addOns.Autoplay.stop(),this.settings.autoplay=!1,this.accordion.addOns.Autoplay.settings.autoplay=!1)}}destroy(){Array.from(this.accordion.accordionEl.querySelectorAll(".ga-video[ data-video-preinit ]")).forEach((t=>{t.removeAttribute("data-video-preinit"),t.removeEventListener("click",this.preinitVideoClickHandler)})),Array.from(this.accordion.accordionEl.querySelectorAll(".ga-video[ data-video-init ]")).forEach((t=>{t.removeAttribute("data-video-init");const e=this.videoReferences[t.getAttribute("data-video-ref")];e.removeEventListener("videoPlay"),e.removeEventListener("videoPause"),e.removeEventListener("videoEnded"),e.destroy(),t.removeAttribute("data-video-ref"),null!==t.parentElement.querySelector(".ga-video[ data-video-preinit ]")&&t.remove()})),this.videoReferences.length=0,this.accordion.removeEventListener("update."+this.namespace),this.accordion.removeEventListener("panelOpen."+this.namespace),this.accordion.removeEventListener("panelOpenComplete."+this.namespace)}}]),window.GridAccordion=class extends n{namespace="gridaccordion";settings={};selector;accordionEl=null;panelsEl=null;panelsMaskEl=null;currentIndex=-1;currentPage=0;columns=0;rows=0;totalWidth=0;totalHeight=0;totalPanelsSize=0;computedOpenedPanelWidth=0;computedOpenedPanelHeight=0;maxComputedOpenedPanelWidth=0;maxComputedOpenedPanelHeight=0;collapsedPanelWidth=0;collapsedPanelHeight=0;closedPanelWidth=0;closedPanelHeight=0;computedPanelDistance=0;panels=[];mouseDelayTimer=0;openPanelAnimation={};closePanelsAnimation={};previousColumns=-1;previousRows=-1;isPageScrolling=!1;autoResponsiveRatio=1;loadingPanels=[];eventHandlerReferences={};windowResizeHandler;addOnsManager;constructor(e,i=null){super(),this.selector=e,this.settings=null!==i?{...t,...i}:{...t},this.addOnsManager=new l(this,this.settings.addOns),this.addOnsManager.init(),this.init()}init(){if(this.dispatchEvent("beforeInit"),this.accordionEl=document.querySelector(this.selector),this.accordionEl.classList.remove("ga-no-js"),this.panelsMaskEl=document.createElement("div"),this.panelsMaskEl.classList.add("ga-mask"),this.accordionEl.appendChild(this.panelsMaskEl),this.panelsContainerEl=this.accordionEl.getElementsByClassName("ga-panels")[0],0===this.accordionEl.getElementsByClassName("ga-panels").length&&(this.panelsContainerEl=document.createElement("div"),this.panelsContainerEl.classList.add("ga-panels")),this.panelsMaskEl.appendChild(this.panelsContainerEl),!0===this.settings.shuffle){const t=[...Array.from(this.panelsContainerEl.getElementsByClassName("ga-panel"))];for(let e=t.length-1;e>0;e--){let i=Math.floor(Math.random()*(e+1)),s=t[e];t[e]=t[i],t[i]=s}this.panelsContainerEl.replaceChildren(...t)}this.currentIndex=this.settings.startPanel,-1===this.currentIndex?this.accordionEl.classList.add("ga-closed"):this.accordionEl.classList.add("ga-opened"),-1!==this.settings.startPage&&(this.currentPage=this.settings.startPage),this.windowResizeHandler=new o,this.windowResizeHandler.addEventListener("resize",(()=>{this.resize()})),this.update(),-1!==this.currentIndex&&(this.accordionEl.getElementsByClassName("ga-panel")[this.currentIndex].classList.add("ga-opened"),this.dispatchEvent("panelOpen",{index:this.currentIndex,previousIndex:-1})),this.accordionEl.addEventListener("mouseenter",this.eventHandlerReferences["mouseenter.accordion"]=()=>{this.dispatchEvent("accordionMouseOver")}),this.accordionEl.addEventListener("mouseleave",this.eventHandlerReferences["mouseleave.accordion"]=()=>{clearTimeout(this.mouseDelayTimer),!0===this.settings.closePanelsOnMouseOut&&this.closePanels(),this.dispatchEvent("accordionMouseOut")}),this.dispatchEvent("init")}update(){if(this.dispatchEvent("beforeUpdate"),"horizontal"===this.settings.orientation?(this.accordionEl.classList.remove("ga-vertical"),this.accordionEl.classList.add("ga-horizontal")):"vertical"===this.settings.orientation&&(this.accordionEl.classList.remove("ga-horizontal"),this.accordionEl.classList.add("ga-vertical")),[...Array.from(this.accordionEl.getElementsByClassName("ga-background")),...Array.from(this.accordionEl.getElementsByClassName("ga-background-opened"))].forEach((t=>{t.style.removeProperty("width"),t.style.removeProperty("height")})),this.updatePanels(),this.columns=this.settings.columns,this.rows=this.settings.rows,-1===this.settings.columns&&-1===this.settings.rows?(this.columns=4,this.rows=3):-1===this.settings.columns?(this.columns=Math.ceil(this.getTotalPanels()/this.settings.rows),this.rows=this.settings.rows):-1===this.settings.rows&&(this.columns=this.settings.columns,this.rows=Math.ceil(this.getTotalPanels()/this.settings.columns)),-1===this.settings.columns||-1===this.settings.rows)this.currentPage=0;else if(-1!==this.currentIndex)this.currentPage=Math.floor(this.currentIndex/(this.settings.columns*this.settings.rows));else if(this.settings.columns!==this.previousColumns&&-1!==this.previousColumns||this.settings.rows!==this.previousRows&&-1!==this.previousRows){let t=Math.min(Math.round(this.currentPage*(this.previousColumns*this.previousRows)/(this.settings.columns*this.settings.rows)),this.getTotalPages()-1);this.currentPage!==t&&(this.currentPage=t)}this.panelsContainerEl.removeAttribute("style"),this.resize(),this.dispatchEvent("update")}resize(){if(this.dispatchEvent("beforeResize"),this.panelsMaskEl.removeAttribute("style"),!0===this.settings.responsive?(this.accordionEl.style.width="100%",this.accordionEl.style.height=i(this.settings.height),this.accordionEl.style.maxWidth=i(this.settings.width),this.accordionEl.style.maxHeight=i(this.settings.height),-1===this.settings.aspectRatio&&(this.settings.aspectRatio=this.settings.width/this.settings.height),this.accordionEl.style.height=i(this.accordionEl.clientWidth/this.settings.aspectRatio),"auto"===this.settings.responsiveMode?(this.autoResponsiveRatio=this.accordionEl.clientWidth/this.settings.width,this.panelsMaskEl.style.width=i(this.settings.width),isNaN(this.settings.height)?this.panelsMaskEl.style.height=i(Math.min(this.settings.width/this.settings.aspectRatio,parseInt(this.settings.height,10)/100*window.innerHeight)):this.panelsMaskEl.style.height=i(Math.min(this.settings.width/this.settings.aspectRatio,this.settings.height)),this.autoResponsiveRatio<1?(this.panelsMaskEl.style.transform=`scaleX( ${this.autoResponsiveRatio} ) scaleY( ${this.autoResponsiveRatio} )`,this.panelsMaskEl.style.transformOrigin="top left"):(this.panelsMaskEl.style.removeProperty("transform"),this.panelsMaskEl.style.removeProperty("transform-origin")),this.totalWidth=this.panelsMaskEl.clientWidth,this.totalHeight=this.panelsMaskEl.clientHeight):(this.totalWidth=this.accordionEl.clientWidth,this.totalHeight=this.accordionEl.clientHeight)):(this.accordionEl.style.width=i(this.settings.width),this.accordionEl.style.height=i(this.settings.height),this.accordionEl.style.removeProperty("max-width"),this.accordionEl.style.removeProperty("max-height"),this.totalWidth=this.accordionEl.clientWidth,this.totalHeight=this.accordionEl.clientHeight),this.loadingPanels.length=0,this.computedPanelDistance=this.settings.panelDistance,"string"==typeof this.computedPanelDistance&&(-1!==this.computedPanelDistance.indexOf("%")?this.computedPanelDistance=this.totalWidth*(parseInt(this.computedPanelDistance,10)/100):-1!==this.computedPanelDistance.indexOf("px")&&(this.computedPanelDistance=parseInt(this.computedPanelDistance,10))),this.closedPanelWidth=(this.totalWidth-(this.columns-1)*this.computedPanelDistance)/this.columns,this.closedPanelHeight=(this.totalHeight-(this.rows-1)*this.computedPanelDistance)/this.rows,this.computedOpenedPanelWidth=this.settings.openedPanelWidth,this.maxComputedOpenedPanelWidth=this.settings.maxOpenedPanelWidth,"string"==typeof this.maxComputedOpenedPanelWidth&&(-1!==this.maxComputedOpenedPanelWidth.indexOf("%")?this.maxComputedOpenedPanelWidth=this.totalWidth*(parseInt(this.maxComputedOpenedPanelWidth,10)/100):-1!==this.maxComputedOpenedPanelWidth.indexOf("px")&&(this.maxComputedOpenedPanelWidth=parseInt(this.maxComputedOpenedPanelWidth,10))),this.computedOpenedPanelHeight=this.settings.openedPanelHeight,this.maxComputedOpenedPanelHeight=this.settings.maxOpenedPanelHeight,"string"==typeof this.maxComputedOpenedPanelHeight&&(-1!==this.maxComputedOpenedPanelHeight.indexOf("%")?this.maxComputedOpenedPanelHeight=this.totalHeight*(parseInt(this.maxComputedOpenedPanelHeight,10)/100):-1!==this.maxComputedOpenedPanelHeight.indexOf("px")&&(this.maxComputedOpenedPanelHeight=parseInt(this.maxComputedOpenedPanelHeight,10))),"string"==typeof this.computedOpenedPanelWidth)if(-1!==this.computedOpenedPanelWidth.indexOf("%"))this.computedOpenedPanelWidth=this.totalWidth*(parseInt(this.computedOpenedPanelWidth,10)/100);else if(-1!==this.computedOpenedPanelWidth.indexOf("px"))this.computedOpenedPanelWidth=parseInt(this.computedOpenedPanelWidth,10);else if("max"===this.computedOpenedPanelWidth&&-1!==this.currentIndex){const t=this.getPanelAt(this.currentIndex).getContentSize();this.computedOpenedPanelWidth="loading"===t?this.closedPanelWidth:Math.min(t.width,this.maxComputedOpenedPanelWidth)}if("string"==typeof this.computedOpenedPanelHeight)if(-1!==this.computedOpenedPanelHeight.indexOf("%"))this.computedOpenedPanelHeight=this.totalHeight*(parseInt(this.computedOpenedPanelHeight,10)/100);else if(-1!==this.computedOpenedPanelHeight.indexOf("px"))this.computedOpenedPanelHeight=parseInt(this.computedOpenedPanelHeight,10);else if("max"===this.computedOpenedPanelHeight&&-1!==this.currentIndex){const t=this.getPanelAt(this.currentIndex).getContentSize();this.computedOpenedPanelHeight="loading"===t?this.closedPanelHeight:Math.min(t.height,this.maxComputedOpenedPanelHeight)}if("auto"===this.settings.openedPanelWidth||"auto"===this.settings.openedPanelHeight){const t=this.getMinSize(this.getFirstPanelFromPage(),this.getLastPanelFromPage()),e=t.width,i=t.height;"auto"===this.settings.openedPanelWidth&&(this.computedOpenedPanelWidth=e),"auto"===this.settings.openedPanelHeight&&(this.computedOpenedPanelHeight=i)}if(Array.from(document.getElementsByClassName("ga-background")).forEach((t=>{t.style.maxWidth=i(this.maxComputedOpenedPanelWidth),t.style.maxHeight=i(this.maxComputedOpenedPanelHeight)})),Array.from(document.getElementsByClassName("ga-background-opened")).forEach((t=>{t.style.maxWidth=i(this.maxComputedOpenedPanelWidth),t.style.maxHeight=i(this.maxComputedOpenedPanelHeight)})),this.collapsedPanelWidth=(this.totalWidth-this.computedOpenedPanelWidth-(this.columns-1)*this.computedPanelDistance)/(this.columns-1),this.collapsedPanelHeight=(this.totalHeight-this.computedOpenedPanelHeight-(this.rows-1)*this.computedPanelDistance)/(this.rows-1),this.computedOpenedPanelWidth=Math.floor(this.computedOpenedPanelWidth),this.computedOpenedPanelHeight=Math.floor(this.computedOpenedPanelHeight),this.collapsedPanelWidth=Math.floor(this.collapsedPanelWidth),this.collapsedPanelHeight=Math.floor(this.collapsedPanelHeight),this.closedPanelWidth=Math.floor(this.closedPanelWidth),this.closedPanelHeight=Math.floor(this.closedPanelHeight),this.totalWidth=this.closedPanelWidth*this.columns+this.computedPanelDistance*(this.columns-1),this.totalHeight=this.closedPanelHeight*this.rows+this.computedPanelDistance*(this.rows-1),"custom"===this.settings.responsiveMode||!1===this.settings.responsive?(this.accordionEl.style.width=i(this.totalWidth),this.accordionEl.style.height=i(this.totalHeight)):(this.accordionEl.style.width=i(this.totalWidth*this.autoResponsiveRatio),this.accordionEl.style.height=i(this.totalHeight*this.autoResponsiveRatio),this.panelsMaskEl.style.width=i(this.totalWidth),this.panelsMaskEl.style.height=i(this.totalHeight)),"horizontal"===this.settings.orientation?(this.totalPanelsSize=this.totalWidth*this.getTotalPages()+this.computedPanelDistance*(this.getTotalPages()-1),this.panelsContainerEl.style.width=i(this.totalPanelsSize)):(this.totalPanelsSize=this.totalHeight*this.getTotalPages()+this.computedPanelDistance*(this.getTotalPages()-1),this.panelsContainerEl.style.height=i(this.totalPanelsSize)),this.getTotalPages()>1){const t="horizontal"===this.settings.orientation?"left":"top",e=-(("horizontal"===this.settings.orientation?this.totalWidth:this.totalHeight)+this.computedPanelDistance)*this.currentPage;this.panelsContainerEl.style[t]=i(e)}this.panels.forEach(((t,e)=>{let i,s,n,a,o,r;if("horizontal"===this.settings.orientation?(o=e%this.columns+this.columns*Math.floor(e/(this.rows*this.columns)),r=Math.floor(e/this.columns)-this.rows*Math.floor(e/(this.rows*this.columns)),-1!==this.currentIndex&&Math.floor(e/(this.rows*this.columns))===this.currentPage?(i=this.currentPage*(this.totalWidth+this.computedPanelDistance)+(o-this.currentPage*this.columns)*(this.collapsedPanelWidth+this.computedPanelDistance)+(e%this.columns>this.currentIndex%this.columns?this.computedOpenedPanelWidth-this.collapsedPanelWidth:0),s=r*(this.collapsedPanelHeight+this.computedPanelDistance)+(Math.floor(e/this.columns)>Math.floor(this.currentIndex/this.columns)?this.computedOpenedPanelHeight-this.collapsedPanelHeight:0)):(i=o*(this.closedPanelWidth+this.computedPanelDistance),s=r*(this.closedPanelHeight+this.computedPanelDistance))):(o=e%this.columns,r=Math.floor(e/this.columns),-1!==this.currentIndex&&Math.floor(e/(this.rows*this.columns))===this.currentPage?(i=o*(this.collapsedPanelWidth+this.computedPanelDistance)+(e%this.columns>this.currentIndex%this.columns?this.computedOpenedPanelWidth-this.collapsedPanelWidth:0),s=this.currentPage*(this.totalHeight+this.computedPanelDistance)+(r-this.currentPage*this.rows)*(this.collapsedPanelHeight+this.computedPanelDistance)+(Math.floor(e/this.columns)>Math.floor(this.currentIndex/this.columns)?this.computedOpenedPanelHeight-this.collapsedPanelHeight:0)):(i=o*(this.closedPanelWidth+this.computedPanelDistance),s=r*(this.closedPanelHeight+this.computedPanelDistance))),-1!==this.currentIndex&&Math.floor(e/(this.rows*this.columns))===this.currentPage?(n=e%this.columns==this.currentIndex%this.columns?this.computedOpenedPanelWidth:this.collapsedPanelWidth,a=Math.floor(e/this.columns)===Math.floor(this.currentIndex/this.columns)?this.computedOpenedPanelHeight:this.collapsedPanelHeight):(n=this.closedPanelWidth,a=this.closedPanelHeight),Math.floor(e/(this.rows*this.columns))===this.currentPage&&"max"===this.settings.openedPanelWidth&&e%this.columns==this.currentIndex%this.columns||"max"===this.settings.openedPanelHeight&&Math.floor(e/this.columns)===Math.floor(this.currentIndex/this.columns)){const o=t.getContentSize();e%this.columns==this.currentIndex%this.columns&&("loading"===o&&-1===this.loadingPanels.indexOf(e)?this.loadingPanels.push(e):o.width<this.computedOpenedPanelWidth&&(i+=(this.computedOpenedPanelWidth-o.width)/2,n=o.width)),Math.floor(e/this.columns)===Math.floor(this.currentIndex/this.columns)&&("loading"===o&&-1===this.loadingPanels.indexOf(e)?this.loadingPanels.push(e):o.height<this.computedOpenedPanelHeight&&(s+=(this.computedOpenedPanelHeight-o.height)/2,a=o.height))}t.setPosition(i,s),t.setSize(n,a)})),this.dispatchEvent("resize")}updatePanels(){[...this.panels].forEach(((t,e)=>{if(null===this.accordionEl.querySelector(`.ga-panel[data-index="${e}"]`)){t.removeEventListener("panelMouseOver"),t.removeEventListener("panelMouseOut"),t.removeEventListener("panelClick"),t.removeEventListener("imagesComplete"),t.destroy();const i=this.panels.findIndex((t=>t.index===e));this.panels.splice(i,1)}})),Array.from(this.accordionEl.getElementsByClassName("ga-panel")).forEach(((t,e)=>{if(!1===t.hasAttribute("data-init")){const i=this.createPanel(t);this.panels.splice(e,0,i)}this.panels[e].settings=this.settings,this.panels[e].index=e}))}createPanel(t){const e=new a(t,this.settings);return e.addEventListener("panelMouseOver",(t=>{!0!==this.isPageScrolling&&("hover"===this.settings.openPanelOn&&(clearTimeout(this.mouseDelayTimer),this.mouseDelayTimer=setTimeout((()=>{this.openPanel(t.detail.index)}),this.settings.mouseDelay)),this.dispatchEvent("panelMouseOver",{index:t.detail.index}))})),e.addEventListener("panelMouseOut",(t=>{!0!==this.isPageScrolling&&this.dispatchEvent("panelMouseOut",{index:t.detail.index})})),e.addEventListener("panelClick",(t=>{this.accordionEl.classList.contains("ga-swiping")||("click"===this.settings.openPanelOn&&(t.detail.index!==this.currentIndex?this.openPanel(t.detail.index):this.closePanels()),this.dispatchEvent("panelClick",{index:t.detail.index}))})),e.addEventListener("panelMouseDown",(e=>{const i=t.getElementsByTagName("a");i.length<1||(Array.from(i).forEach((t=>{t.removeEventListener("click",this.eventHandlerReferences["click.link.panel"])})),e.detail.index!==this.currentIndex&&"click"===this.settings.openPanelOn&&Array.from(i).forEach((t=>{t.addEventListener("click",this.eventHandlerReferences["click.link.panel"]=t=>{t.preventDefault()})})))})),e.addEventListener("imagesComplete",(t=>{t.detail.index===this.currentIndex&&t.detail.contentSize!==this.computedOpenedPanelSize&&this.openPanel(t.detail.index,!0)})),e}getPanelAt(t){return this.panels[t]}getCurrentIndex(){return this.currentIndex}getTotalPanels(){return this.panels.length}nextPanel(){const t=this.currentIndex>=this.getTotalPanels()-1?0:this.currentIndex+1;this.openPanel(t)}previousPanel(){const t=this.currentIndex<=0?this.getTotalPanels()-1:this.currentIndex-1;this.openPanel(t)}destroy(){this.addOnsManager.destroyAll(),this.accordionEl.removeAttribute("style"),this.panelsContainerEl.removeAttribute("style"),this.accordionEl.setAttribute("class","grid-accordion ga-no-js"),this.accordionEl.removeEventListener("mouseenter",this.eventHandlerReferences["mouseenter.accordion"]),this.accordionEl.removeEventListener("mouseleave",this.eventHandlerReferences["mouseleave.accordion"]),this.windowResizeHandler.removeEventListener("resize"),this.windowResizeHandler.destroy(),this.stopPanelsAnimation(this.openPanelAnimation),this.stopPanelsAnimation(this.closePanelsAnimation),this.panels.forEach((t=>{t.removeEventListener("panelMouseOver"),t.removeEventListener("panelMouseOut"),t.removeEventListener("panelClick"),t.removeEventListener("imagesComplete"),t.destroy()})),this.panels.length=0,this.accordionEl.insertBefore(this.panelsContainerEl,this.accordionEl.firstChild),this.panelsMaskEl.remove()}animatePanels(t,e){const i=(new Date).valueOf();let s=0;t.isRunning=!0,t.timer=window.requestAnimationFrame((function n(){s<1?(s=((new Date).valueOf()-i)/e.duration,s>1&&(s=1),s=.5-Math.cos(s*Math.PI)/2,e.step(s),t.timer=window.requestAnimationFrame(n)):(e.complete(),t.isRunning=!1,window.cancelAnimationFrame(t.timer))}))}stopPanelsAnimation(t){void 0!==t.isRunning&&!0===t.isRunning&&(t.isRunning=!1,window.cancelAnimationFrame(t.timer))}openPanel(t,e){if(t===this.currentIndex&&!0!==e)return;!0===this.accordionEl.classList.contains("ga-closed")&&this.accordionEl.classList.replace("ga-closed","ga-opened");const i=this.currentIndex;if(this.currentIndex=t,-1!==this.settings.columns&&-1!==this.settings.rows){const e=Math.floor(this.currentIndex/(this.columns*this.rows));e!==this.currentPage&&this.gotoPage(e),this.currentIndex=t}const s=[],n=[],a=[],o=[],r=[],l=[],h=[],d=[],c=[],p=this.getFirstPanelFromPage(),u=this.getLastPanelFromPage();let g=0;if(this.loadingPanels.length=0,null!==this.accordionEl.querySelector(".ga-panel.ga-opened")&&this.accordionEl.querySelector(".ga-panel.ga-opened").classList.remove("ga-opened"),this.accordionEl.getElementsByClassName("ga-panel")[this.currentIndex].classList.add("ga-opened"),"max"===this.settings.openedPanelWidth){const t=this.getPanelAt(this.currentIndex).getContentSize();this.computedOpenedPanelWidth="loading"===t?this.closedPanelWidth:Math.min(t.width,this.maxComputedOpenedPanelWidth),this.collapsedPanelWidth=(this.totalWidth-this.computedOpenedPanelWidth-(this.columns-1)*this.computedPanelDistance)/(this.columns-1)}if("max"===this.settings.openedPanelHeight){const t=this.getPanelAt(this.currentIndex).getContentSize();this.computedOpenedPanelHeight="loading"===t?this.closedPanelHeight:Math.min(t.height,this.maxComputedOpenedPanelHeight),this.collapsedPanelHeight=(this.totalHeight-this.computedOpenedPanelHeight-(this.rows-1)*this.computedPanelDistance)/(this.rows-1)}if("auto"===this.settings.openedPanelWidth||"auto"===this.settings.openedPanelHeight){const t=this.getMinSize(p,u),e=t.width,i=t.height;"auto"===this.settings.openedPanelWidth&&(this.computedOpenedPanelWidth=e,this.collapsedPanelWidth=(this.totalWidth-this.computedOpenedPanelWidth-(this.columns-1)*this.computedPanelDistance)/(this.columns-1)),"auto"===this.settings.openedPanelHeight&&(this.computedOpenedPanelHeight=i,this.collapsedPanelHeight=(this.totalHeight-this.computedOpenedPanelHeight-(this.rows-1)*this.computedPanelDistance)/(this.rows-1))}for(let t=p;t<=u;t++){const e=this.getPanelAt(t),i=e.getPosition(),p=e.getContentSize();r[t]=i.left,l[t]=i.top,"horizontal"===this.settings.orientation?(s[t]=this.currentPage*(this.totalWidth+this.computedPanelDistance)+g%this.columns*(this.collapsedPanelWidth+this.computedPanelDistance)+(t%this.columns>this.currentIndex%this.columns?this.computedOpenedPanelWidth-this.collapsedPanelWidth:0),n[t]=Math.floor(g/this.columns)*(this.collapsedPanelHeight+this.computedPanelDistance)+(Math.floor(t/this.columns)>Math.floor(this.currentIndex/this.columns)?this.computedOpenedPanelHeight-this.collapsedPanelHeight:0)):(s[t]=g%this.columns*(this.collapsedPanelWidth+this.computedPanelDistance)+(t%this.columns>this.currentIndex%this.columns?this.computedOpenedPanelWidth-this.collapsedPanelWidth:0),n[t]=this.currentPage*(this.totalHeight+this.computedPanelDistance)+Math.floor(g/this.columns)*(this.collapsedPanelHeight+this.computedPanelDistance)+(Math.floor(t/this.columns)>Math.floor(this.currentIndex/this.columns)?this.computedOpenedPanelHeight-this.collapsedPanelHeight:0));const u=e.getSize();h[t]=u.width,d[t]=u.height,a[t]=t%this.columns==this.currentIndex%this.columns?this.computedOpenedPanelWidth:this.collapsedPanelWidth,o[t]=Math.floor(t/this.columns)===Math.floor(this.currentIndex/this.columns)?this.computedOpenedPanelHeight:this.collapsedPanelHeight,"max"===this.settings.openedPanelWidth&&t%this.columns==this.currentIndex%this.columns&&("loading"===p&&-1===this.loadingPanels.indexOf(t)?this.loadingPanels.push(t):p.width<this.computedOpenedPanelWidth&&(s[t]+=(this.computedOpenedPanelWidth-p.width)/2,a[t]=p.width)),"max"===this.settings.openedPanelHeight&&Math.floor(t/this.columns)===Math.floor(this.currentIndex/this.columns)&&("loading"===p&&-1===this.loadingPanels.indexOf(t)?this.loadingPanels.push(t):p.height<this.computedOpenedPanelHeight&&(n[t]+=(this.computedOpenedPanelHeight-p.height)/2,o[t]=p.height)),s[t]===r[t]&&n[t]===l[t]||c.push(t),a[t]===h[t]&&o[t]===d[t]||-1!==this.loadingPanels.indexOf(t)||c.push(t),g++}const m=c.length;this.closePanelsAnimation.page===this.currentPage&&this.stopPanelsAnimation(this.closePanelsAnimation),this.stopPanelsAnimation(this.openPanelAnimation),this.openPanelAnimation.page=this.currentPage,this.animatePanels(this.openPanelAnimation,{duration:this.settings.openPanelDuration,step:t=>{for(let e=0;e<m;e++){const i=c[e],p=this.getPanelAt(i);p.setPosition(t*(s[i]-r[i])+r[i],t*(n[i]-l[i])+l[i]),p.setSize(t*(a[i]-h[i])+h[i],t*(o[i]-d[i])+d[i])}},complete:()=>{this.dispatchEvent("panelOpenComplete",{index:this.currentIndex})}}),this.dispatchEvent("panelOpen",{index:this.currentIndex,previousIndex:i})}closePanels(){const t=this.currentIndex;this.currentIndex=-1,!0===this.accordionEl.classList.contains("ga-opened")&&this.accordionEl.classList.replace("ga-opened","ga-closed"),null!==this.accordionEl.querySelector(".ga-panel.ga-opened")&&this.accordionEl.querySelector(".ga-panel.ga-opened").classList.remove("ga-opened"),clearTimeout(this.mouseDelayTimer);const e=[],i=[],s=[],n=[],a=[],o=[],r=[],l=[],h=this.getFirstPanelFromPage(),d=this.getLastPanelFromPage();let c=0;for(let t=h;t<=d;t++){const h=this.getPanelAt(t),d=h.getPosition();a[t]=d.left,o[t]=d.top,"horizontal"===this.settings.orientation?(e[t]=this.currentPage*(this.totalWidth+this.computedPanelDistance)+c%this.columns*(this.closedPanelWidth+this.computedPanelDistance),i[t]=Math.floor(c/this.columns)*(this.closedPanelHeight+this.computedPanelDistance)):(e[t]=c%this.columns*(this.closedPanelWidth+this.computedPanelDistance),i[t]=this.currentPage*(this.totalHeight+this.computedPanelDistance)+Math.floor(c/this.columns)*(this.closedPanelHeight+this.computedPanelDistance));const p=h.getSize();r[t]=p.width,l[t]=p.height,s[t]=this.closedPanelWidth,n[t]=this.closedPanelHeight,c++}this.openPanelAnimation.page===this.currentPage&&this.stopPanelsAnimation(this.openPanelAnimation),this.stopPanelsAnimation(this.closePanelsAnimation),this.closePanelsAnimation.page=this.currentPage,this.animatePanels(this.closePanelsAnimation,{duration:this.settings.closePanelDuration,step:t=>{for(let c=h;c<=d;c++){const h=this.getPanelAt(c);h.setPosition(t*(e[c]-a[c])+a[c],t*(i[c]-o[c])+o[c]),h.setSize(t*(s[c]-r[c])+r[c],t*(n[c]-l[c])+l[c])}},complete:()=>{this.dispatchEvent("panelsCloseComplete",{previousIndex:t})}}),this.dispatchEvent("panelsClose",{previousIndex:t})}getMinSize(t,e){let i=this.maxComputedOpenedPanelWidth,s=this.maxComputedOpenedPanelHeight;for(let n=t;n<=e;n++){const t=this.getPanelAt(n).getContentSize();n%this.columns==this.currentIndex%this.columns&&("loading"===t&&-1===this.loadingPanels.indexOf(n)?(this.loadingPanels.push(n),i=this.closedPanelWidth):t.width<i&&(i=t.width)),Math.floor(n/this.columns)===Math.floor(this.currentIndex/this.columns)&&("loading"===t&&-1===this.loadingPanels.indexOf(n)?(this.loadingPanels.push(n),s=this.closedPanelHeight):t.height<s&&(s=t.height))}return{width:i,height:s}}getTotalPages(){return-1===this.settings.columns||-1===this.settings.rows?1:Math.ceil(this.getTotalPanels()/(this.columns*this.rows))}getCurrentPage(){return-1===this.settings.columns?0:this.currentPage}gotoPage(t){-1!==this.currentIndex&&this.closePanels(),this.currentPage=t,this.isPageScrolling=!0;const e="horizontal"===this.settings.orientation?"left":"top",s="horizontal"===this.settings.orientation?this.totalWidth:this.totalHeight;let n=-(t*s+this.currentPage*this.computedPanelDistance);this.currentPage===this.getTotalPages()-1&&(n=-(this.totalPanelsSize-s)),this.dispatchEvent("pageScroll",{index:this.currentPage}),this.panelsContainerEl.addEventListener("transitionend",(()=>{this.isPageScrolling=!1,this.dispatchEvent("pageScrollComplete",{index:this.currentPage})})),this.panelsContainerEl.style.transition=`${e} ${this.settings.pageScrollDuration/1e3}s`,this.panelsContainerEl.style[e]=i(n)}nextPage(){const t=this.currentPage>=this.getTotalPages()-1?0:this.currentPage+1;this.gotoPage(t)}previousPage(){const t=this.currentPage<=0?this.getTotalPages()-1:this.currentPage-1;this.gotoPage(t)}getFirstPanelFromPage(){return 1===this.getTotalPages()?0:this.currentPage*(this.columns*this.rows)}getLastPanelFromPage(){return 1===this.getTotalPages()||this.currentPage===this.getTotalPages()-1?this.getTotalPanels()-1:(this.currentPage+1)*(this.columns*this.rows)-1}}})();